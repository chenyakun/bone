<!DOCTYPE HTML>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>Here</title>
</head>
<style type="text/css" media="screen">
#grow {
	border: 1px solid red;
	height: 100px;
	width: 100px;
	position: absolute;
}
</style>
<body>
	<div id="grow">
	</div>
<script type="text/javascript" charset="utf-8">
//cache a reference to the dom node.
var el = document.getElementById('grow');

//store only the initial value of offset width
var w = el.offsetWidth;

//continue using the original value without returning to the DOM
function render() {
	w = w + 5;
	el.style.width = w + 'px';
}

var i = 0;
var time = new Date();
function run() {

	if( new Date() - time < 1000){
		console.log(i++);
	} else {
		cancelAnimationFrame(id);
	}
	
}

var id = window.requestAnimationFrame(run);
var id = window.requestAnimationFrame(run);
var id = window.requestAnimationFrame(run);
console.log('id',id);


function loop(){
	if(w < 800) {
		// 特点是近似显示器的刷新频率,tab 页不激活，不刷
		// 自调用不会导致栈溢出，因为每秒最多运行60-70次
		requestAnimationFrame(loop);
		render();
	}
}

loop();

</script>
</body>

</html>
